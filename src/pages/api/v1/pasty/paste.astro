---
import { ShortURLModel } from "../../../../db";

const secret = Astro.request.headers.get("Secret");
const badRequest = new Response(undefined, {
        status: 400
    });

    
let res:Response = badRequest;
await Astro.request.json().then((json) => {
    if (json["title"] && json["description"] && json["url"] && json["isImage"] != undefined && json["shorten"]) {
        new ShortURLModel(json).save();
        res = new Response(undefined, {
            status: 200
        });
    }
}, (err) => {

});

return res;
---